Improve the idea:

Use a stack (syncronize with locks) and put tasks that represent backtracking branches.
The threads from the workpool take tasks from there.
